{% extends "base.html" %}
{% block content %}
<div class="page-header">
    <h2>Main Control Dashboard</h2>
    <div class="last-check">
        <span>Last System Check</span>
        <strong>--:--:--</strong>
    </div>
</div>
<p class="sub-header" id="dashboard-sub-header">Initializing system and awaiting connection...</p>

<!-- Skeleton Loader for Controller Grid -->
<div class="dashboard-grid" id="controllers-grid">
    <!-- These are placeholders that will be replaced by JS -->
    {% for i in range(5) %}
    <div class="card controller-card loading-placeholder">
        <div class="card-header">
            <h3 class="placeholder-glow" style="width: 60%;"></h3>
            <span class="placeholder-glow" style="width: 30%;"></span>
        </div>
        <div class="card-body">
            <p class="sub-header placeholder-glow" style="margin: 0 0 16px 0; width: 40%;"></p>
            <div class="metric"><span class="placeholder-glow" style="width: 50%;"></span><strong class="placeholder-glow" style="width: 25%;"></strong></div>
            <div class="metric"><span class="placeholder-glow" style="width: 70%;"></span><strong class="placeholder-glow" style="width: 20%;"></strong></div>
            <div class="metric"><span class="placeholder-glow" style="width: 60%;"></span><strong class="placeholder-glow" style="width: 30%;"></strong></div>
        </div>
        <div class="card-footer">
            <div class="btn placeholder-glow" style="width: 100%;"></div>
        </div>
    </div>
    {% endfor %}
</div>

<div class="panels-grid">
    <div class="card co-drive-panel">
        <div class="card-header">
            <h3>Co-Drive Panel</h3>
            <span>Real-time action logs & handovers</span>
            <span class="live-indicator">CONNECTING...</span>
        </div>
        <div class="card-body" id="co-drive-logs">
             <!-- Initial State Placeholder -->
             <div class="log-item-placeholder">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h.01"></path><path d="M12 4h.01"></path><path d="M20 12h.01"></path><path d="M4 12h.01"></path><path d="M17.66 17.66h.01"></path><path d="M6.34 6.34h.01"></path><path d="M17.66 6.34h.01"></path><path d="M6.34 17.66h.01"></path></svg>
                <span>Awaiting Drone Connection...</span>
            </div>
        </div>
    </div>
    <div class="card cyber-threat-panel">
        <div class="card-header">
            <h3>Cyber Threat Monitor</h3>
            <span>Real-time security analysis</span>
            <span class="live-indicator" id="threat-indicator">INITIALIZING</span>
        </div>
        <div class="card-body" id="cyber-threats">
             <!-- Initial State Placeholder -->
             <div class="threat-item-placeholder">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"></path></svg>
                <span>Scanning for threats...</span>
            </div>
        </div>
        <div class="card-footer">
            <button id="threat-monitor-emergency-btn" class="btn btn-outline" disabled>Activate Emergency Control</button>
        </div>
    </div>
</div>
{% endblock %}